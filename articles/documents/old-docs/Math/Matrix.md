行列
====================

行列はジオメトリの姿勢を表現したり座標変換に使用される、行と列に配置された浮動小数値のセットです。

Lumino は4行4列の浮動小数点行列をサポートしています。

Lumino の Matrix クラスは、数学的な定義とメモリレイアウト共に行優先です。

x, y, z 座標への平行移動は次のようになります。
```
1, 0, 0, 0,
0, 1, 0, 0,
0, 0, 1, 0,
x, y, z, 1
```

ワールド行列W、ビュー行列V、射影行列Pの計算式は `wvp = W * V * P` です。
コードでは次のようになります。
```cpp
Matrix wvp = Matrix::makeAffineTransformation(...) * Matrix::makeLookAtLH(...) * Matrix::makePerspectiveFovLH(...);
```


初期化・割り当て
--------------------
Matrix クラスは初期値を指定しない場合、単位行列で初期化されます。

```cpp
Matrix mat;
//elemets:
//  1  0  0  0
//  0  1  0  0
//  0  0  1  0
//  0  0  0  1 
```

要素を直接指定して初期化することもできます。（行優先に注意してください）
```cpp
Matrix mat(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15);
//elemets:
//  0  1  2  3
//  4  5  6  7
//  8  9  10 11
//  12 13 14 15 
```

要素へのアクセス
--------------------
operator() によって要素へアクセスすることができます。

```cpp
Matrix mat;
mat(1, 2) = 100;
std::cout << mat(1, 2); // => 100.0
```

raw-array であるメンバ変数 m からもアクセスできますが、operator() を使用するほうが安全です。


演算
--------------------
座標変換のための行列を作成するには、makeRotationZ 等の static メソッドが便利です。
makeRotationX は X 軸に沿ってジオメトリを回転させる行列を作成して返します。

```cpp
Matrix rot = Matrix::makeRotationX(Math::PI);   
```

一部の演算では、make～ の static メソッドと似たようなインスタンスメソッドが用意されています。
これは呼び出した Matrix クラス自身を変更しますが、別途作成した行列を乗算するよりも高速に動作します。

```cpp
rot.rotateY(Math::PI);  // rot を Y 軸に沿って回転
```


